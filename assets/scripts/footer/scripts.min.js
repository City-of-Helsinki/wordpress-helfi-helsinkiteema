"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function jsCloseInit(){var e=document.querySelectorAll(".js-close");if(0<e.length)for(var t=0;t<e.length;t++)jsCloseHandler(e[t])}function jsCloseHandler(e){e.addEventListener("click",jsCloseClick)}function jsCloseClick(e){e.preventDefault();var t,n=e.currentTarget;n&&(e=controllerElement(t=n.dataset.close?document.getElementById(n.dataset.close):n.parentElement),n&&e&&jsToggleClose(e,t))}function setFocus(e){try{e.focus()}catch(e){}return document.activeElement===e}function firstFocusableChild(e){var t=e.querySelector(".menu li a");if(t)return t;t=e.querySelector("input");return t||e.firstElementChild}function lastFocusableChild(e){return e.lastElementChild}function focusFirstChild(e){for(var t=0;t<e.childNodes.length;t++)if(setFocus(e.childNodes[t])||focusFirstChild(e.childNodes[t]))return!0;return null}function controlledElement(e){return document.getElementById(e.getAttribute("aria-controls"))}function controllerElement(e){return e.id?document.querySelector('[aria-controls="'+e.id+'"]'):null}function jsEvent(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t}function forCallbackLoop(e,t){if(e&&0<e.length)for(var n=0;n<e.length;n++)t(e[n],n)}function helsinkiGalleryLightbox(e){var l=e.strings,i=e.icons,o=null;function r(e){var t;e.preventDefault(),function(e,t){o&&o!==e&&f(o);var n=p(e),t=t?function(e,t){t=e.querySelector('.lightbox__images img[src="'+t+'"]');return t?t.parentElement:null}(e,t.src):null;g(n,t),M(e,!1),h(e,!0),j(m(e),!0),o=e}((t=e.currentTarget.closest(".wp-block-gallery"),document.getElementById(t.getAttribute("data-lightbox-id"))),e.currentTarget.firstElementChild)}function a(e){e.target===o&&f(o)}function s(e){!o||("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&f(o)}function c(e){e.preventDefault(),f(e.target.closest(".lightbox"))}function u(e){e.preventDefault(),o&&((e=p(o))?e.nextElementSibling?g(e,e.nextElementSibling):g(e,t(o)):g(null,t(o)))}function d(e){e.preventDefault(),o&&((e=p(o))?e.previousElementSibling?g(e,e.previousElementSibling):g(e,n(o)):g(null,n(o)))}function f(e){M(e,!0),h(e,!1),j(m(e),!1),g(p(e),null),o=null}function g(e,t){e&&(h(e,!1),M(e,!0)),t&&(h(t,!0),M(t,!1),e=t.closest(".lightbox__content"),t=t.firstElementChild.naturalWidth,e.style.maxWidth=t+"px")}function m(e){return e.querySelector(".lightbox__close")}function p(e){return e.querySelector(".lightbox__images .is-active")}function t(e){return e.querySelector(".lightbox__images figure")}function n(e){e=e.querySelectorAll(".lightbox__images figure");return e[e.length-1]}function v(e,t){var n=document.createElement(e);return(e=n.classList).add.apply(e,_toConsumableArray(t)),n}function b(e,t,n,o){var r=v("button",["lightbox__"+e,"hds-button","hds-button--small"]),e=v("span",["screen-reader-text"]);return r.type="button",e.innerHTML=n,r.addEventListener("click",o),r.append(e),r.innerHTML+=t,r}function y(e,t,n){n?e.classList.add(t):e.classList.remove(t)}function h(e,t){y(e,"is-active",t)}function j(e,t){t?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}function M(e,t){e.hidden=!!t}return{init:function(e){if(0!==e.length){for(var t,n,o=0;o<e.length;o++)t=e[o],n=void 0,0!==(n=t.querySelectorAll(".blocks-gallery-item figure")).length&&t.querySelector(".blocks-gallery-item > figure > a")&&(function(e){for(var t=0;t<e.length;t++)!function(e){e.querySelector("a").addEventListener("click",r)}(e[t])}(n),(n=function(e,t){var n=v("div",["lightbox"]),o=v("div",["lightbox__content"]),r=function(e,t){e=document.createElement(e);return e.innerHTML=t,e}("h2",l.lightboxTitle),e=function(e){if(e.id)return"lightbox-"+e.id;return"lightbox-"+(Date.now()+e.offsetTop+e.clientHeight+e.childElementCount)}(e);n.id=e,r.id=e+"-title",r.classList.add("screen-reader-text"),n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.setAttribute("aria-labelledby",r.id),M(n,!0),o.append(r),o.append(function(e){for(var t=v("div",["lightbox__images"]),n=0;n<e.length;n++)t.append(function(e){var t=document.createElement("figure"),n=e.querySelector("img"),e=e.querySelector("figcaption");t.append(n.cloneNode()),e&&t.append(e.cloneNode(!0));return M(t,!0),t}(e[n]));return t}(t)),1<t.length&&(o.append(function(){var e=v("div",["lightbox__navigation"]);return e.append(b("prev",i.prev,l.prev,d)),e.append(b("next",i.next,l.next,u)),e}()),o.classList.add("has-navigation"));return o.append(function(e){var t=v("button",["lightbox__close","button-reset"]),n=v("span",["screen-reader-text"]);return t.id="close-"+e,t.type="button",n.innerHTML=l.close,t.setAttribute("aria-controls",e),j(t,!1),t.addEventListener("click",c),t.append(n),t.innerHTML+=i.close,t}(e)),n.append(o),n}(t,n)).addEventListener("click",a),t.setAttribute("data-lightbox-id",n.id),t.after(n),function(e,t){y(e,"has-lightbox",t)}(t,!0));document.addEventListener("keydown",s)}}}}jsCloseInit();var HelsinkiGalleryLightbox=helsinkiGalleryLightbox(helsinkiTheme);function jsLoadMoreInit(){var e=document.querySelectorAll(".js-load-more");if(0<e.length)for(var t=0;t<e.length;t++)jsLoadMoreHandler(e[t])}function jsLoadMoreHandler(e){e.addEventListener("click",jsLoadMore)}function jsLoadMore(e){e.preventDefault();var t=e.currentTarget;if(t.disabled)return!1;t.disabled=!0;var n=document.querySelector(t.dataset.loadMoreTarget);if(!n)return!1;var o=JSON.parse(t.dataset.loadMore);if(!o)return!1;var r=t.dataset.page,e={action:o.action,nonce:o.nonce,query:o.query,page:r,type:n.classList.contains("grid")?"grid":"default",offset:t.getAttribute("data-offset"),per_page:t.getAttribute("data-per-page"),is_front_page:o.is_front_page,is_home:o.is_home};jQuery.post(o.endpoint,e,function(e){e.success?(n.insertAdjacentHTML("beforeend",e.data.html),eventLoadMoreRendered(n),r++,t.setAttribute("data-page",r),e.data.end?t.style.display="none":t.disabled=!1,n.children[n.children.length-e.data.count].querySelector("a").focus()):t.style.display="none"})}function eventLoadMoreRendered(e){var t=jsEvent("loadMoreRendered");e.dispatchEvent(t)}HelsinkiGalleryLightbox.init(document.querySelectorAll(".wp-block-gallery")),jsLoadMoreInit();var jsModal={currentModal:null,currentTrigger:null,firstFocusable:null,lastFocusable:null};function jsInitModal(){var e=document.querySelectorAll(".js-modal");if(0<e.length){document.addEventListener("keydown",jsCloseModalOnEsc);for(var t=0;t<e.length;t++)jsModalHandler(e[t])}}function jsModalHandler(e){e.addEventListener("modalOpen",jsModalOpened),e.addEventListener("modalClose",jsModalClosed)}function jsModalTrapFocus(e){"Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===jsModal.firstFocusable&&(jsModal.lastFocusable.focus(),e.preventDefault()):document.activeElement===jsModal.lastFocusable&&(jsModal.firstFocusable.focus(),e.preventDefault()))}function jsModalOpened(e){jsModal.currentModal=e.currentTarget,jsModal.currentTrigger=controllerElement(e.currentTarget),jsModal.firstFocusable=firstFocusableChild(jsModal.currentModal),jsModal.lastFocusable=lastFocusableChild(jsModal.currentModal),jsModal.currentModal.addEventListener("keydown",jsModalTrapFocus)}function jsModalClosed(e){jsModal.currentModal.removeEventListener("keydown",jsModalTrapFocus),setFocus(jsModal.currentTrigger),jsModal.currentModal=null,jsModal.currentTrigger=null,jsModal.firstFocusable=null,jsModal.lastFocusable=null}function jsCloseModal(e){var t=controllerElement(e);t?jsToggleClose(t,e):e.classList.remove("active")}function jsCloseModalOnEsc(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&jsCloseActiveModals()}function jsCloseActiveModals(){var e=document.querySelectorAll(".modal.active");if(0<e.length)for(var t=0;t<e.length;t++)jsCloseModal(e[t])}function isModal(e){return e.classList.contains("modal")}function eventModalOpen(e){var t=jsEvent("modalOpen");e.dispatchEvent(t)}function eventModalClose(e){var t=jsEvent("modalClose");e.dispatchEvent(t)}function helsinkiNotifications(){function l(e){return"helsinki_notification_"+e.id}function i(e){e.preventDefault();var t=e.currentTarget.closest(".notification");e=l(t),sessionStorage.setItem(e,"closed"),t.remove()}return{init:function(e){if(e)for(var t=e.querySelectorAll(".notification"),n=0;n<t.length;n++){var o=t[n].querySelector(".close"),r=l(t[n]);"closed"===sessionStorage.getItem(r)?t[n].remove():o.addEventListener("click",i)}}}}jsInitModal();var HelsinkiNotifications=helsinkiNotifications();function jsScrollInit(){var e=document.querySelectorAll(".js-scroll");if(0<e.length)for(var t=0;t<e.length;t++)jsScrollHandler(e[t])}function jsScrollHandler(e){e.classList.contains("top")&&e.addEventListener("click",jsScrollTop)}function jsScrollTop(e){e.preventDefault(),window.scroll(0,0)}function jsMenuInit(){forCallbackLoop(document.querySelectorAll(".js-submenu-toggle"),function(t){t.addEventListener("touchstart",function(e){jsSubmenuToggle(e,t)}),t.addEventListener("click",function(e){jsSubmenuToggle(e,t)})}),forCallbackLoop(document.querySelectorAll("#main-menu .menu__item--parent > .link-wrap > a"),function(e){var t=e.closest(".menu__item--parent");e.addEventListener("mouseover",function(e){toggleMouseHoverClass(t,!0)}),t.addEventListener("mouseleave",function(e){toggleMouseHoverClass(t,!1)})}),document.addEventListener("click",closeAllSubmenus)}function jsSubmenuToggle(e,t){e.preventDefault();var n=t.closest(".menu__item");forCallbackLoop(n.parentElement.querySelectorAll(".menu__item.open"),function(e){n!==e&&closeSubmenu(e.querySelector(".js-submenu-toggle"))}),(isMenuItemOpen(n)?closeSubmenu:openSubmenu)(t)}function closeAllSubmenus(e){var t=document.getElementById("main-menu");t.contains(e.target)||forCallbackLoop(t.querySelectorAll(".menu__item.open"),function(e){closeSubmenu(e.querySelector(".js-submenu-toggle"))})}function isMenuItemOpen(e){return e.classList.contains("open")}function closeSubmenu(e){e&&(e.closest(".menu__item").classList.remove("open"),e.setAttribute("aria-expanded","false"))}function openSubmenu(e){e&&(e.closest(".menu__item").classList.add("open"),e.setAttribute("aria-expanded","true"))}function toggleMouseHoverClass(e,t){t?e.classList.add("menu__item--hover"):e.classList.remove("menu__item--hover")}function jsToggleInit(){var e=document.querySelectorAll(".js-toggle");if(0<e.length)for(var t=0;t<e.length;t++)jsToggleHandler(e[t])}function jsToggleHandler(e){e.addEventListener("click",jsToggleClickEvent)}function jsToggleClickEvent(e){e.preventDefault();e=e.currentTarget;null!=e&&jsToggleClick(e)}function jsToggleClick(e){var t=controlledElement(e);("false"===e.getAttribute("aria-expanded")?jsToggleOpen:jsToggleClose)(e,t)}function jsToggleOpen(e,t){closeOtherToggles(e),isModal(t)&&eventModalOpen(t),e.setAttribute("aria-expanded","true"),jsToggleSwapText(e,"expanded"),t.hidden=!1,t.classList.add("active"),ifControlsNoScroll(e)&&fixedDocumentBody()}function jsToggleClose(e,t){isModal(t)&&eventModalClose(t),e.setAttribute("aria-expanded","false"),t.hidden=!0,t.classList.remove("active"),jsToggleSwapText(e,"closed"),ifControlsNoScroll(e)&&scrollableDocumentBody(),e.focus()}function jsToggleSwapText(e,t){var n;e.hasAttribute("data-text")&&e.hasAttribute("data-text-expanded")&&((n=e.querySelector(".text"))&&(n.textContent="expanded"===t?e.getAttribute("data-text-expanded"):e.getAttribute("data-text")))}function ifControlsNoScroll(e){if(e.classList.contains("js-toggle-no-scroll")){var t=e.hasAttribute("data-no-scroll-breakpoint")?parseInt(e.getAttribute("data-no-scroll-breakpoint"),10):0;return"up"===(e.hasAttribute("data-no-scroll-limit")?e.getAttribute("data-no-scroll-limit"):"up")&&screen.width>t||screen.width<t}return!1}function fixedDocumentBody(){document.body.style.position="fixed",document.body.style.top="-".concat(window.scrollY,"px")}HelsinkiNotifications.init(document.querySelector("#main .notifications")),jsScrollInit(),jsMenuInit(),function(t){t(document).ready(function(){t(".table-of-contents a").on("click",function(){var e=t(t(this).attr("href"));e[0].setAttribute("tabindex",-1),e[0].focus()})})}(jQuery),jsToggleInit();var scrollY=document.body.style.top;function scrollableDocumentBody(){document.body.style.position="",document.body.style.top="",window.scrollTo(0,-1*parseInt(scrollY||"0"))}function closeOtherToggles(e){var t=document.querySelectorAll('.js-toggle[aria-expanded="true"]');if(0<t.length)for(var n=0;n<t.length;n++)e!==t[n]&&jsToggleClick(t[n])}